{"ast":null,"code":"import _defineProperty from\"C:\\\\Users\\\\Shane.Jemmotte\\\\source\\\\repos\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"C:\\\\Users\\\\Shane.Jemmotte\\\\source\\\\repos\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Shane.Jemmotte\\\\source\\\\repos\\\\my-app\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import'whatwg-fetch';import{RSAA}from'redux-api-middleware';var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator[\"throw\"](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):new P(function(resolve){resolve(result.value);}).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var Api=/*#__PURE__*/function(){function Api(){_classCallCheck(this,Api);this.baseUrl=undefined;this.mockBaseUrl=undefined;this.privateApiDomain=undefined;this.permissions=undefined;this.permissions={unauthorisedEndpoints:[]};}_createClass(Api,[{key:\"setBaseUrl\",value:function setBaseUrl(baseUrl){this.baseUrl=baseUrl;}},{key:\"setMockBaseUrl\",value:function setMockBaseUrl(mockBaseUrl){this.mockBaseUrl=mockBaseUrl;}},{key:\"setPrivateApiDomain\",value:function setPrivateApiDomain(privateApiDomain){this.privateApiDomain=privateApiDomain;}},{key:\"setPermissions\",value:function setPermissions(permissions){this.permissions=permissions;}},{key:\"get\",value:function get(actionType,endpoint,options){var fullEndpointUri=this.buildEndpoint(endpoint,options);return this.isAllowed('GET',fullEndpointUri)?_defineProperty({},RSAA,{endpoint:fullEndpointUri,method:'GET',types:this.buildTypes(actionType),headers:this.buildHeaders(null,options),credentials:'same-origin'}):this.getPermissionFailureAction(actionType);}},{key:\"post\",value:function post(actionType,endpoint,payload,options){var fullEndpointUri=this.buildEndpoint(endpoint,options);return this.isAllowed('POST',fullEndpointUri)?_defineProperty({},RSAA,{endpoint:fullEndpointUri,method:'POST',body:JSON.stringify(payload),types:this.buildTypes(actionType),headers:this.buildHeaders({'Content-Type':'application/json'},options),credentials:'same-origin'}):this.getPermissionFailureAction(actionType);}},{key:\"postMultipart\",value:function postMultipart(actionType,endpoint,binary,data,options){var form=new FormData();form.append('binary',binary);form.append('data',JSON.stringify(data)||'');var fullEndpointUri=this.buildEndpoint(endpoint,options);return _defineProperty({},RSAA,{endpoint:fullEndpointUri,method:'POST',body:form,types:this.buildTypes(actionType),headers:this.buildHeaders(null,options),credentials:'same-origin'});}},{key:\"put\",value:function put(actionType,endpoint,payload,options){var fullEndpointUri=this.buildEndpoint(endpoint,options);return _defineProperty({},RSAA,{endpoint:fullEndpointUri,method:'PUT',body:JSON.stringify(payload),types:this.buildTypes(actionType),headers:this.buildHeaders({'Content-Type':'application/json'},options),credentials:'same-origin'});}},{key:\"patch\",value:function patch(actionType,endpoint,payload,options){var fullEndpointUri=this.buildEndpoint(endpoint,options);return _defineProperty({},RSAA,{endpoint:fullEndpointUri,method:'PATCH',body:JSON.stringify(payload),types:this.buildTypes(actionType),headers:this.buildHeaders({'Content-Type':'application/json'},options),credentials:'same-origin'});}},{key:\"delete\",value:function _delete(actionType,endpoint,options){var fullEndpointUri=this.buildEndpoint(endpoint,options);return _defineProperty({},RSAA,{endpoint:fullEndpointUri,method:'DELETE',types:this.buildTypes(actionType),headers:this.buildHeaders(null,options),credentials:'same-origin'});}},{key:\"crossDomain\",value:function crossDomain(actionType,method,endpoint){var payload=arguments.length>3&&arguments[3]!==undefined?arguments[3]:null;return _defineProperty({},RSAA,{endpoint:endpoint,method:method,body:JSON.stringify(payload),types:this.buildTypes(actionType),headers:this.buildHeaders(null),credentials:'same-origin'});}},{key:\"buildEndpoint\",value:function buildEndpoint(endpoint){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{useMockApi:false,isPrivateEndpoint:false};var isPrivateEndpoint=typeof options===\"boolean\"?false:options.isPrivateEndpoint||false;var useMockApi=typeof options===\"boolean\"?options:options.useMockApi||false;var actualBaseUrl=useMockApi?this.mockBaseUrl:this.baseUrl;if(isPrivateEndpoint&&this.privateApiDomain&&actualBaseUrl){actualBaseUrl=actualBaseUrl.replace(this.privateApiDomain,\"private/\".concat(this.privateApiDomain));}return actualBaseUrl?\"\".concat(actualBaseUrl).concat(endpoint):endpoint;}},{key:\"buildHeaders\",value:function buildHeaders(headers){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{useMockApi:false};var useMockApi=typeof options===\"boolean\"?options:options.useMockApi||false;if(!headers){headers={};}return headers;}},{key:\"buildTypes\",value:function buildTypes(actionType){return[{type:actionType+\"_REQUEST\",payload:function payload(action){return JSON.parse(action[RSAA].body);}},{type:\"\".concat(actionType,\"_SUCCESS\"),meta:function meta(action,state,res){var location=res.headers.get('Location');if(location){return{headers:{location:location}};};return null;}},\"\".concat(actionType,\"_FAILURE\")];}},{key:\"isAllowed\",value:function isAllowed(requestedMethod,requestedEndpoint){var _this=this;var matchingUnauthorisedEndpoints=this.permissions&&this.permissions.unauthorisedEndpoints?this.permissions.unauthorisedEndpoints.filter(function(endpoint){return endpoint.methods.some(function(method){return method===requestedMethod;})&&\"\".concat(_this.baseUrl).concat(requestedEndpoint).replace(/^\\/|\\/$/g,'').match(endpoint.uri);}):[];return matchingUnauthorisedEndpoints.length===0;}},{key:\"getPermissionFailureAction\",value:function getPermissionFailureAction(actionType){return{type:\"\".concat(actionType,\"_FAILURE\"),meta:'Permissions failure requesting selected action.'};}}]);return Api;}();export default new Api();","map":{"version":3,"sources":["api-service.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import 'whatwg-fetch';\r\nimport { RSAA } from 'redux-api-middleware';\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try {\r\n            step(generator.next(value));\r\n        }\r\n        catch (e) {\r\n            reject(e);\r\n        } }\r\n        function rejected(value) { try {\r\n            step(generator[\"throw\"](value));\r\n        }\r\n        catch (e) {\r\n            reject(e);\r\n        } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nclass Api {\r\n    constructor() {\r\n        this.baseUrl = undefined;\r\n        this.mockBaseUrl = undefined;\r\n        this.privateApiDomain = undefined;\r\n        this.permissions = undefined;\r\n        this.permissions = {\r\n            unauthorisedEndpoints: [],\r\n        };\r\n    }\r\n    setBaseUrl(baseUrl) {\r\n        this.baseUrl = baseUrl;\r\n    }\r\n    setMockBaseUrl(mockBaseUrl) {\r\n        this.mockBaseUrl = mockBaseUrl;\r\n    }\r\n    setPrivateApiDomain(privateApiDomain) {\r\n        this.privateApiDomain = privateApiDomain;\r\n    }\r\n    setPermissions(permissions) {\r\n        this.permissions = permissions;\r\n    }\r\n    get(actionType, endpoint, options) {\r\n        const fullEndpointUri = this.buildEndpoint(endpoint, options);\r\n        return this.isAllowed('GET', fullEndpointUri) ? {\r\n            [RSAA]: {\r\n                endpoint: fullEndpointUri,\r\n                method: 'GET',\r\n                types: this.buildTypes(actionType),\r\n                headers: this.buildHeaders(null, options),\r\n                credentials: 'same-origin'\r\n            }\r\n        } : this.getPermissionFailureAction(actionType);\r\n    }\r\n    post(actionType, endpoint, payload, options) {\r\n        const fullEndpointUri = this.buildEndpoint(endpoint, options);\r\n        return this.isAllowed('POST', fullEndpointUri) ? {\r\n            [RSAA]: {\r\n                endpoint: fullEndpointUri,\r\n                method: 'POST',\r\n                body: JSON.stringify(payload),\r\n                types: this.buildTypes(actionType),\r\n                headers: this.buildHeaders({ 'Content-Type': 'application/json' }, options),\r\n                credentials: 'same-origin'\r\n            },\r\n        } : this.getPermissionFailureAction(actionType);\r\n    }\r\n    postMultipart(actionType, endpoint, binary, data, options) {\r\n        const form = new FormData();\r\n        form.append('binary', binary);\r\n        form.append('data', JSON.stringify(data) || '');\r\n        const fullEndpointUri = this.buildEndpoint(endpoint, options);\r\n        return {\r\n            [RSAA]: {\r\n                endpoint: fullEndpointUri,\r\n                method: 'POST',\r\n                body: form,\r\n                types: this.buildTypes(actionType),\r\n                headers: this.buildHeaders(null, options),\r\n                credentials: 'same-origin'\r\n            },\r\n        };\r\n    }\r\n    put(actionType, endpoint, payload, options) {\r\n        const fullEndpointUri = this.buildEndpoint(endpoint, options);\r\n        return {\r\n            [RSAA]: {\r\n                endpoint: fullEndpointUri,\r\n                method: 'PUT',\r\n                body: JSON.stringify(payload),\r\n                types: this.buildTypes(actionType),\r\n                headers: this.buildHeaders({ 'Content-Type': 'application/json' }, options),\r\n                credentials: 'same-origin'\r\n            },\r\n        };\r\n    }\r\n    patch(actionType, endpoint, payload, options) {\r\n        const fullEndpointUri = this.buildEndpoint(endpoint, options);\r\n        return {\r\n            [RSAA]: {\r\n                endpoint: fullEndpointUri,\r\n                method: 'PATCH',\r\n                body: JSON.stringify(payload),\r\n                types: this.buildTypes(actionType),\r\n                headers: this.buildHeaders({ 'Content-Type': 'application/json' }, options),\r\n                credentials: 'same-origin'\r\n            },\r\n        };\r\n    }\r\n    delete(actionType, endpoint, options) {\r\n        const fullEndpointUri = this.buildEndpoint(endpoint, options);\r\n        return {\r\n            [RSAA]: {\r\n                endpoint: fullEndpointUri,\r\n                method: 'DELETE',\r\n                types: this.buildTypes(actionType),\r\n                headers: this.buildHeaders(null, options),\r\n                credentials: 'same-origin'\r\n            }\r\n        };\r\n    }\r\n    crossDomain(actionType, method, endpoint, payload = null) {\r\n        return {\r\n            [RSAA]: {\r\n                endpoint: endpoint,\r\n                method: method,\r\n                body: JSON.stringify(payload),\r\n                types: this.buildTypes(actionType),\r\n                headers: this.buildHeaders(null),\r\n                credentials: 'same-origin'\r\n            },\r\n        };\r\n    }\r\n    buildEndpoint(endpoint, options = { useMockApi: false, isPrivateEndpoint: false }) {\r\n        const isPrivateEndpoint = typeof (options) === \"boolean\" ? false : options.isPrivateEndpoint || false;\r\n        const useMockApi = typeof (options) === \"boolean\" ? options : options.useMockApi || false;\r\n        let actualBaseUrl = (useMockApi) ? this.mockBaseUrl : this.baseUrl;\r\n        if (isPrivateEndpoint && this.privateApiDomain && actualBaseUrl) {\r\n            actualBaseUrl = actualBaseUrl.replace(this.privateApiDomain, `private/${this.privateApiDomain}`);\r\n        }\r\n        return (actualBaseUrl) ? `${actualBaseUrl}${endpoint}` : endpoint;\r\n    }\r\n    buildHeaders(headers, options = { useMockApi: false }) {\r\n        const useMockApi = typeof (options) === \"boolean\" ? options : options.useMockApi || false;\r\n        if (!headers) {\r\n            headers = {};\r\n        }\r\n        return headers;\r\n    }\r\n    buildTypes(actionType) {\r\n        return [\r\n            {\r\n                type: actionType + \"_REQUEST\",\r\n                payload: function (action) {\r\n                    return JSON.parse(action[RSAA].body);\r\n                },\r\n            },\r\n            {\r\n                type: `${actionType}_SUCCESS`,\r\n                meta: function (action, state, res) {\r\n                    const location = res.headers.get('Location');\r\n                    if (location) {\r\n                        return {\r\n                            headers: {\r\n                                location,\r\n                            }\r\n                        };\r\n                    }\r\n                    ;\r\n                    return null;\r\n                },\r\n            },\r\n            `${actionType}_FAILURE`\r\n        ];\r\n    }\r\n    isAllowed(requestedMethod, requestedEndpoint) {\r\n        const matchingUnauthorisedEndpoints = (this.permissions && this.permissions.unauthorisedEndpoints) ?\r\n            this.permissions.unauthorisedEndpoints.filter((endpoint) => endpoint.methods.some((method) => method === requestedMethod) &&\r\n                `${this.baseUrl}${requestedEndpoint}`.replace(/^\\/|\\/$/g, '').match(endpoint.uri))\r\n            : [];\r\n        return matchingUnauthorisedEndpoints.length === 0;\r\n    }\r\n    getPermissionFailureAction(actionType) {\r\n        return {\r\n            type: `${actionType}_FAILURE`,\r\n            meta: 'Permissions failure requesting selected action.'\r\n        };\r\n    }\r\n}\r\nexport default new Api();\r\n//# sourceMappingURL=api-service.js.map"]},"metadata":{},"sourceType":"module"}